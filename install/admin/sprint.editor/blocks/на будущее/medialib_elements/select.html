<div class="sp-field">
    <input type="button" class="sp-toggle" value="Выбрать">
</div>
<div class="sp-source">
    <div class="sp-filter">
        <div class="sp-filter-row">
            <select class="sp-select-collection">
                <option value="">нет</option>
                {{~it.collections :item:index}}
                <option {{?item.id== it.collection_id}}selected="selected" {{?}} value="{{!item.id}}">{{!item.title}}
                </option>
                {{~}}
            </select>

            {{?it.collection_id && it.page_cnt}}
            <input class="sp-nav-left" type="button" value="&larr;">
            <input class="sp-nav-right" type="button" value="&rarr;">
            {{=it.page_num}}/{{=it.page_cnt}}
            {{?}}

        </div>
    </div>
    {{?it.collection_id && it.page_cnt}}
    <div class="sp-clear">
        {{~it.source :item:index}}
        <div data-id="{{!item.id}}" class="sp-item">
            <img alt="{{!item.id}}" src="{{!item.src}}">
        </div>
        {{~}}
    </div>
    <div title="Перетащите элементы вниз для их выбора" class="sp-arrows">&darr;&darr;&darr;</div>
    {{?}}
</div>
<div class="sp-elements sp-clear">
    {{~it.elements :item:index}}
    <div data-id="{{!item.id}}" class="sp-item">
        <img alt="{{!item.id}}" src="{{!item.src}}">
    </div>
    {{~}}
</div>
